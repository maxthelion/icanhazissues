function updateIssue(e,t,s){{var a=window.location.pathname.split("/")[2],r="/issues/"+a+"/update/"+e,i={oldLabel:t,newLabel:s};$.ajax({url:r,type:"POST",data:i,success:function(e){return console.log(e),!0},error:function(e){return console.log("Error: "+JSON.parse(e)),!1}})}}var pusher=new Pusher("d861d962297286b85253",{authEndpoint:"/pusher/auth"}),channel=pusher.subscribe("private-issues");channel.bind("client-issue-updates",function(e){var t="#"+e.fromLabel+"-"+e.number;$(t).remove();var s="."+e.milestone+"-"+e.toLabel+"-list-group",a="";e.avatarUrl&&(a='<span class="pull-right">\n                  <img src="'+e.avatarUrl+'" class="img img-circle avatar"></img>\n                </span>');var r=e.toLabel+"-"+e.number,i='<li class="list-group-item issue-list-item" data-issue-number="'+e.number+'" id="'+r+'">\n                    <a href="'+e.url+'">\n                     <div class="issue-text col-xs-8">'+e.text+'</div>\n                    </a>\n                    <div class="issue-assignee col-xs-4 pull-right">\n                    '+a+"\n                    </div>\n                  </li>";$(s).append(i)});for(var issueGroups=document.getElementsByClassName("issue-list-group"),fromLabel="",toLabel="",fromMilestone="",toMilestone="",i=0;i<issueGroups.length;i++){var issueMilestone=issueGroups[i].getAttribute("data-milestone");Sortable.create(issueGroups[i],{group:"issue-"+issueMilestone,animation:150,dragable:".issue-list-item",ghostClass:"sortable-ghost",onStart:function(e){var t=e.item.parentNode;fromLabel=t.getAttribute("data-label"),fromGroup=t.getAttribute("data-milestone")},onEnd:function(e){var t=e.item.getAttribute("data-issue-number"),s=e.item.parentNode;toLabel=s.getAttribute("data-label"),toGroup=s.getAttribute("data-milestone");var a=e.item.children,r={number:t,milestone:toGroup,fromLabel:fromLabel,toLabel:toLabel,url:a[0].href,text:a[0].children[0].innerText};a[1].children[0]&&(r.avatarUrl=a[1].children[0].children[0].currentSrc),fromLabel!=toLabel&&fromMilestone==toMilestone&&(e.item.setAttribute("id",toLabel+"-"+t),channel.trigger("client-issue-updates",r),updateIssue(t,fromLabel,toLabel))}})}